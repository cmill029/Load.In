/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.4.1/userguide/tutorial_java_projects.html
 */

task composeBuild (type: Exec){
    executable 'docker-compose'
    args 'build'
}

task composeStop (type: Exec){
    //stops a running container
    executable 'docker-compose'
    args 'stop'
}

task composeStart (type: Exec){
    //starts a running container
    executable 'docker-compose'
    args 'start'
}

task composeDown (type: Exec){
    executable 'docker-compose'
    args 'down', '-v'
}


task composeUp (type: Exec){
    executable 'docker-compose'
    args 'up', '-d'
}

task deleteTables (type: Exec){
    commandLine 'sh', '-c', 'cat DeleteTables.sql | docker exec -i db_db_1 /usr/bin/mysql -u root --password=password loadin'
}

task cleanData (type: Exec){
    dependsOn 'loadSchema'
    commandLine 'sh', '-c', 'cat CleanData.sql | docker exec -i db_db_1 /usr/bin/mysql -u root --password=password loadin'
}

task loadData (type:Exec){
    dependsOn 'loadSchema', 'cleanData'
    commandLine 'sh', '-c', 'cat TableData.sql | docker exec -i db_db_1 /usr/bin/mysql -u root --password=password loadin'

}

task loadSchema (type:Exec){
    dependsOn 'composeUp'
    commandLine 'sh', '-c', 'cat Schema.sql | docker exec -i db_db_1 /usr/bin/mysql -u root --password=password loadin'

}

